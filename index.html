<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Food Suggestion</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: system-ui, sans-serif;
      background: #f6f7fb;
    }

    header {
      background: #111;
      color: #fff;
      padding: 16px;
      text-align: center;
    }

    nav button {
      margin: 6px;
      padding: 8px 16px;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      background: #222;
      color: #fff;
      transition: transform .15s ease, background .15s ease;
    }
    nav button:hover { background: #333; transform: translateY(-2px); }
    nav button:active { transform: scale(.95); }

    .container {
      max-width: 900px;
      margin: auto;
      padding: 20px;
    }

    .card {
      background: #fff;
      padding: 20px;
      border-radius: 16px;
      margin-bottom: 20px;
      box-shadow: 0 10px 25px rgba(0,0,0,.08);
      animation: fadeIn .3s ease;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    button.primary {
      background: #111;
      color: #fff;
      padding: 14px;
      border: none;
      border-radius: 12px;
      font-size: 16px;
      cursor: pointer;
      width: 100%;
      transition: transform .15s ease, box-shadow .15s ease;
      margin-bottom: 16px;
    }
    button.primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(0,0,0,.15);
    }
    button.primary:active { transform: scale(.97); }

    h2, h3 { margin-top: 0; }

    .row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: #f1f1f1;
      padding: 12px;
      border-radius: 10px;
      margin-bottom: 10px;
      gap: 10px;
    }

    .row span {
      flex: 1;
    }

    .row button {
      padding: 6px 12px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      background: #fff;
      transition: transform .15s ease, background .15s ease;
    }
    .row button:hover { background: #eaeaea; transform: translateY(-1px); }
    .row button:active { transform: scale(.95); }

    input, select {
      width: 100%;
      padding: 12px;
      margin-bottom: 12px;
      border-radius: 10px;
      border: 1px solid #ccc;
    }

    .hidden { display: none; }

    .toast {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: #111;
      color: #fff;
      padding: 12px 18px;
      border-radius: 12px;
      opacity: 0;
      transform: translateY(10px);
      transition: opacity .3s ease, transform .3s ease;
      z-index: 999;
      pointer-events: none;
    }
    .toast.show { opacity: 1; transform: translateY(0); }
  </style>
</head>
<body>

<header>
  <h1>üçΩÔ∏è Food Suggestion</h1>
  <nav>
    <button onclick="showPage('home')">Home</button>
    <button onclick="showPage('edit')">Edit List</button>
  </nav>
</header>

<div class="container">

  <!-- HOME -->
  <div id="home" class="card">
    <button class="primary" onclick="createSuggestions()">Create Food Suggestion</button>

    <h3>Breakfast</h3>
    <div class="row">
      <span id="b">‚Äî</span>
      <button onclick="changeOne('breakfast','b')">Change</button>
    </div>

    <h3>Lunch & Dinner</h3>
    <div class="row">
      <span id="lp">Repeat Food: ‚Äî</span>
      <button onclick="changeOne('lunchPinned','lp','Repeat Food')">Change</button>
    </div>
    <div class="row">
      <span id="l1">Food 1: ‚Äî</span>
      <button onclick="changeOne('lunch1','l1','Food 1')">Change</button>
    </div>
    <div class="row">
      <span id="l2">Food 2: ‚Äî</span>
      <button onclick="changeOne('lunch2','l2','Food 2')">Change</button>
    </div>

    <button class="primary" onclick="copyText()">Copy Text</button>
  </div>

  <!-- EDIT -->
  <div id="edit" class="card hidden">
    <h2>Edit Food List</h2>

    <select id="cat">
      <option value="breakfast">Breakfast</option>
      <option value="lunchPinned">Lunch & Dinner : Repeat Food</option>
      <option value="lunch1">Lunch & Dinner : Food 1</option>
      <option value="lunch2">Lunch & Dinner : Food 2</option>
    </select>

    <input id="food" placeholder="Add food item" />
    <button class="primary" onclick="addItem()">Add Item</button>

    <div id="lists"></div>
  </div>

</div>

<div id="toast" class="toast">Done</div>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
  import { getFirestore, doc, getDoc, setDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyBidDkElxe6jKaCoeRdhdgwJx5zXnu3Eg4",
    authDomain: "food-suggestion-1ce2d.firebaseapp.com",
    projectId: "food-suggestion-1ce2d",
    storageBucket: "food-suggestion-1ce2d.firebasestorage.app",
    messagingSenderId: "526105101015",
    appId: "1:526105101015:web:c743a3c4c1ab926d502692"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);
  const ref = doc(db, 'food', 'master');

  let data = { breakfast: [], lunchPinned: [], lunch1: [], lunch2: [] };

  const el = id => document.getElementById(id);

  window.showPage = page => {
    el('home').classList.add('hidden');
    el('edit').classList.add('hidden');
    el(page).classList.remove('hidden');
    renderLists();
  };

  window.createSuggestions = () => {
    el('b').innerText = pick(data.breakfast);
    el('lp').innerText = 'Repeat Food: ' + pick(data.lunchPinned);
    el('l1').innerText = 'Food 1: ' + pick(data.lunch1);
    el('l2').innerText = 'Food 2: ' + pick(data.lunch2);
  };

  window.changeOne = (cat, id, label = '') => {
    el(id).innerText = (label ? label + ': ' : '') + pick(data[cat]);
  };

  window.addItem = async () => {
    const c = el('cat').value;
    const f = el('food').value.trim();
    if (!f) return;

    data[c].push(f);
    el('food').value = '';
    renderLists();
    await setDoc(ref, data);
    showToast('Item added successfully');
  };

  function renderLists() {
    const titles = {
      breakfast: 'Breakfast',
      lunchPinned: 'Lunch & Dinner : Repeat Food',
      lunch1: 'Lunch & Dinner : Food 1',
      lunch2: 'Lunch & Dinner : Food 2'
    };

    el('lists').innerHTML = '';
    for (const c in data) {
      el('lists').innerHTML += `<h3>${titles[c]}</h3>`;
      data[c].forEach(item => {
        el('lists').innerHTML += `<div class="row"><span>${item}</span></div>`;
      });
    }
  }

  function pick(arr) {
    return arr.length ? arr[Math.floor(Math.random() * arr.length)] : '‚Äî';
  }

  window.copyText = () => {
    const text =
`Breakfast - ${el('b').innerText},
Lunch & Dinner:
${el('lp').innerText},
${el('l1').innerText},
${el('l2').innerText}`;

    navigator.clipboard.writeText(text);
    showToast('Text copied');
  };

  function showToast(msg) {
    const t = el('toast');
    t.innerText = msg;
    t.classList.add('show');
    setTimeout(() => t.classList.remove('show'), 1800);
  }

  async function load() {
    const snap = await getDoc(ref);
    if (snap.exists()) data = snap.data();
    renderLists();
  }

  load();
</script>

</body>
</html>
