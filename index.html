<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Food Suggestion</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
*{box-sizing:border-box}
body{margin:0;font-family:system-ui,sans-serif;background:#f6f7fb}
header{background:#111;color:#fff;padding:16px;text-align:center}
nav button{margin:6px;padding:8px 16px;border:none;border-radius:10px;cursor:pointer;background:#222;color:#fff}
nav button:hover{background:#333}
.container{max-width:900px;margin:auto;padding:20px}
.card{background:#fff;padding:20px;border-radius:16px;margin-bottom:20px;box-shadow:0 10px 25px rgba(0,0,0,.08)}
button.primary{background:#111;color:#fff;padding:14px;border:none;border-radius:12px;font-size:16px;width:100%;margin-bottom:16px}
.row{display:flex;align-items:center;background:#f1f1f1;padding:12px;border-radius:10px;margin-bottom:10px;gap:10px}
.row span{flex:1}
.row button{padding:6px 12px;border:none;border-radius:8px;cursor:pointer}
input,select{width:100%;padding:12px;margin-bottom:12px;border-radius:10px;border:1px solid #ccc}
.hidden{display:none}
.toast{position:fixed;bottom:20px;right:20px;background:#111;color:#fff;padding:12px 18px;border-radius:12px;opacity:0;transition:.3s}
.toast.show{opacity:1}
</style>
</head>

<body>

<header>
<h1>üçΩÔ∏è Food Suggestion</h1>
<nav>
<button onclick="showPage('suggest')">Suggest</button>
<button onclick="showPage('select')">Select</button>
<button onclick="showPage('edit')">Edit List</button>
</nav>
</header>

<div class="container">

<!-- SUGGEST -->
<div id="suggest" class="card">
<button class="primary" onclick="createSuggestions()">Create Food Suggestion</button>

<h3>Breakfast</h3>
<div class="row">
<span id="b">‚Äî</span>
<button onclick="changeOne('breakfast','b')">Change</button>
</div>

<h3>Lunch & Dinner</h3>
<div class="row">
<span id="lp">Repeat Food: ‚Äî</span>
<button onclick="changeOne('lunchPinned','lp','Repeat Food')">Change</button>
</div>

<div class="row">
<span id="l1">Food 1: ‚Äî</span>
<button onclick="changeOne('lunch1','l1','Food 1')">Change</button>
</div>

<div class="row">
<span id="l2">Food 2: ‚Äî</span>
<button onclick="changeOne('lunch2','l2','Food 2')">Change</button>
</div>

<button class="primary" onclick="copyText()">Copy Text</button>
</div>

<!-- SELECT -->
<div id="select" class="card hidden">
<h3>Breakfast</h3>
<select id="sb"></select>

<h3>Lunch & Dinner</h3>
<select id="slp"></select>
<select id="sl1"></select>
<select id="sl2"></select>

<button class="primary" onclick="copyText(true)">Copy Text</button>
</div>

<!-- EDIT -->
<div id="edit" class="card hidden">
<h2>Edit Food List</h2>

<select id="cat">
<option value="breakfast">Breakfast</option>
<option value="lunchPinned">Lunch & Dinner : Repeat Food</option>
<option value="lunch1">Lunch & Dinner : Food 1</option>
<option value="lunch2">Lunch & Dinner : Food 2</option>
</select>

<input id="food" placeholder="Add food item">
<button class="primary" onclick="addItem()">Add Item</button>

<div id="lists"></div>
</div>

</div>

<div id="toast" class="toast"></div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getFirestore, doc, getDoc, setDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const firebaseConfig = {
apiKey:"AIzaSyBidDkElxe6jKaCoeRdhdgwJx5zXnu3Eg4",
authDomain:"food-suggestion-1ce2d.firebaseapp.com",
projectId:"food-suggestion-1ce2d",
storageBucket:"food-suggestion-1ce2d.firebasestorage.app",
messagingSenderId:"526105101015",
appId:"1:526105101015:web:c743a3c4c1ab926d502692"
};

const app=initializeApp(firebaseConfig);
const db=getFirestore(app);
const ref=doc(db,'food','master');

let data={breakfast:[],lunchPinned:[],lunch1:[],lunch2:[]};
const el=id=>document.getElementById(id);

window.showPage=p=>{
['suggest','select','edit'].forEach(x=>el(x).classList.add('hidden'));
el(p).classList.remove('hidden');
renderLists();renderSelect();
};

window.createSuggestions=()=>{
el('b').innerText=pick(data.breakfast);
el('lp').innerText='Repeat Food: '+pick(data.lunchPinned);
el('l1').innerText='Food 1: '+pick(data.lunch1);
el('l2').innerText='Food 2: '+pick(data.lunch2);
};

window.changeOne=(cat,id,label='')=>{
el(id).innerText=(label?label+': ':'')+pick(data[cat]);
};

function renderSelect(){
fill('sb',data.breakfast);
fill('slp',data.lunchPinned);
fill('sl1',data.lunch1);
fill('sl2',data.lunch2);
}

function fill(id,arr){
el(id).innerHTML=arr.map(v=>`<option>${v}</option>`).join('');
}

window.addItem=async()=>{
const c=el('cat').value;
const f=el('food').value.trim();
if(!f)return;
data[c].push(f);
el('food').value='';
await save();
toast('Item added');
};

window.editItem=async(cat,i)=>{
const v=prompt('Edit item',data[cat][i]);
if(!v)return;
data[cat][i]=v.trim();
await save();
toast('Item updated');
};

window.deleteItem=async(cat,i)=>{
if(!confirm('Delete item?'))return;
data[cat].splice(i,1);
await save();
toast('Item deleted');
};

async function save(){
await setDoc(ref,data);
renderLists();renderSelect();
}

function renderLists(){
el('lists').innerHTML='';
for(const c in data){
el('lists').innerHTML+=`<h3>${c}</h3>`;
data[c].forEach((item,i)=>{
el('lists').innerHTML+=`
<div class="row">
<span>${item}</span>
<button onclick="editItem('${c}',${i})">Edit</button>
<button onclick="deleteItem('${c}',${i})">Delete</button>
</div>`;
});
}
}

function pick(arr){
return arr.length?arr[Math.floor(Math.random()*arr.length)]:'‚Äî';
}

window.copyText=(fromSelect=false)=>{
const text=fromSelect?
`Breakfast - ${el('sb').value},
Lunch & Dinner:
Repeat Food - ${el('slp').value},
Food 1 - ${el('sl1').value},
Food 2 - ${el('sl2').value}`:
`Breakfast - ${el('b').innerText},
Lunch & Dinner:
${el('lp').innerText},
${el('l1').innerText},
${el('l2').innerText}`;

navigator.clipboard.writeText(text);
toast('Text copied');
};

function toast(msg){
const t=el('toast');
t.innerText=msg;
t.classList.add('show');
setTimeout(()=>t.classList.remove('show'),1800);
}

async function load(){
const snap=await getDoc(ref);
if(snap.exists())data=snap.data();
renderLists();renderSelect();
}
load();
</script>

</body>
</html>
